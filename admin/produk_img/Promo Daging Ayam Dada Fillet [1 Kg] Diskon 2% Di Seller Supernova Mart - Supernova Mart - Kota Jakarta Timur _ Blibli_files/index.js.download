!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=11)}([function(e,n){e.exports={BWA_HOSTNAME:"{{_BWATRACKERURL}}",BLIBLI_HOSTNAME:"{{_BLIBLIHOSTNAME}}",MTA_HOSTNAME:"{{_MTAHOSTNAME}}",CK_DOMAIN:"{{_COOKIEDOMAIN}}",ALLOWED_EVENTS:"{{ALLOWED_EVENTS}}",ALLOWED_EVENTS_BATCH:"{{ALLOWED_EVENTS_BATCH}}",BATCH_INTERVAL_IN_MILISECOND:"{{BATCH_INTERVAL_IN_MILISECOND}}",BATCH_QUOTA_SIZE:"{{BATCH_QUOTA_SIZE}}",BATCH_PENDING_POOL_NAME:"{{BATCH_PENDING_POOL_NAME}}",BATCH_ONGOING_POOL_NAME:"{{BATCH_ONGOING_POOL_NAME}}",INDEXEDDB_NAME:"{{INDEXEDDB_NAME}}",BATCH_SKIP_STATUS:[503],USER_ID:"userId",CK_SESSION_ACTION_SEQUENCE:"__bwa_session_action_sequence",CK_USER_ID:"__bwa_user_id",CK_SESSION_ID:"__bwa_session_id",CK_GCLID:"__bwa_session_gclid_data",CK_GCLSRC:"__bwa_session_gclsrc_data",CK_REFERRER:"__bwa_session_referrer_data",CK_UTM_CAMPAIGN:"__bwa_session_utm_campaign",CK_UTM_MEDIUM:"__bwa_session_utm_medium",CK_UTM_SOURCE:"__bwa_session_utm_source",CK_UTM_CONTENT:"__bwa_session_utm_content",CK_UTM_TERM:"__bwa_session_utm_term",CK_USER_SESSION_SEQUENCE:"__bwa_user_session_sequence",CK_CAMPAIGN_TYPE:"__bwa_session_campaign_type",CK_UTMA:"__utma",CK_UTMB:"__utmb"}},function(e,n){for(var t=[],o=0;o<256;++o)t[o]=(o+256).toString(16).substr(1);e.exports=function(e,n){var o=n||0,r=t;return[r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]]].join("")}},function(e,n){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var o=new Uint8Array(16);e.exports=function(){return t(o),o}}else{var r=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),r[n]=e>>>((3&n)<<3)&255;return r}}},function(e,n,t){var o=t(8),r=t(7),i=r;i.v1=o,i.v4=r,e.exports=i},function(e,n,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=t(0),i=t(3).v4;e.exports={getUrlParamAsObject:function(){var e=window.location.search.substring(1).split("&"),n={};for(var t in e){var o=e[t].split("=");n[o[0]]=decodeURIComponent(o[1])}return n},generateUniqueId:function(){return Math.round((new Date).getTime()/1e3)+"."+i()},getParameterURL:function(e,n){var t=n||this.getUrlParamAsObject(),r="object"===(void 0===e?"undefined":o(e))?e:[e];for(var i in r){var a=t[r[i]];if(a)return a}return""},getDiffMsBeforeMidnight:function(){var e=new Date;return(new Date).setHours(24,0,0,0)-e},setCookie:function(e,n,t){var o="expires="+function(e){var n=new Date;return n.setTime(n.getTime()+e),n}(t).toGMTString();document.cookie=e+"="+n+"; "+o+"; domain="+r.CK_DOMAIN+"; path=/"},getCookie:function(e){for(var n=e+"=",t=document.cookie.split("; "),o=0;o<t.length;o++)if(t[o].startsWith(n))return t[o].slice(n.length);return""},getCookieAsNumber:function(e){return parseInt(this.getCookie(e),0)||0},deleteCookie:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; domain="+r.CK_DOMAIN+"; path=/"}}},function(e,n,t){var o=t(0),r=void 0;function i(e,n){r.transaction(e,"readwrite").objectStore(e).add(n)}function a(e,n){r.transaction(e,"readwrite").objectStore(e).delete(n)}function u(e,n){r.transaction(e,"readonly").objectStore(e).openCursor().onsuccess=n}e.exports={initDB:function(e){var n=window.indexedDB.open(o.INDEXEDDB_NAME,1);n.onsuccess=function(){r=this.result,e()},n.onupgradeneeded=function(){!function(e){e.createObjectStore(o.BATCH_PENDING_POOL_NAME,{keyPath:"eventId"}),e.createObjectStore(o.BATCH_ONGOING_POOL_NAME,{keyPath:"uuid"})}(this.result)}},insertOngoingData:function(e){i(o.BATCH_ONGOING_POOL_NAME,e)},insertPendingData:function(e){i(o.BATCH_PENDING_POOL_NAME,e)},deletePendingData:function(e){a(o.BATCH_PENDING_POOL_NAME,e)},deleteOngoingData:function(e){a(o.BATCH_ONGOING_POOL_NAME,e)},loadPendingData:function(e){u(o.BATCH_PENDING_POOL_NAME,e)},loadOngoingData:function(e){u(o.BATCH_ONGOING_POOL_NAME,e)}}},function(e,n){var t="",o={iphone:["iphone","mobile"],ipod:["ipod","mobile"],ipad:["ipad","tablet"],macintosh:["macintosh","desktop"],androidPhone:["android","mobile"],androidTablet:["android","tablet"],blackberryTablet:["blackberry","tablet"],blackberryPhone:["blackberry","mobile"],windowsPhone:["windows","mobile"],windowsTablet:["windows","tablet"],windows:["windows","desktop"],linux:["linux","desktop"],other:["other","N/A"]},r="firefox",i="Chrome",a="IE",u="Safari",s="Edge",c="Opera",_="Blackberry",d=[[/msie ([\.\_\d]+)/,a],[/trident\/.*?rv:([\.\_\d]+)/,a],[/firefox\/([\.\_\d]+)/,r],[/fxios\/([\.\_\d]+)/,r],[/chrome\/([\.\_\d]+)/,i],[/version\/([\.\_\d]+).*?safari/,u],[/mobile safari ([\.\_\d]+)/,u],[/android.*?version\/([\.\_\d]+).*?safari/,"com.android.browser"],[/crios\/([\.\_\d]+).*?safari/,i],[/opera/,c],[/opera\/([\.\_\d]+)/,c],[/opera ([\.\_\d]+)/,c],[/opera mini.*?version\/([\.\_\d]+)/,"Opera.mini"],[/opr\/([\.\_\d]+)/,c],[/opios\/([a-z\.\_\d]+)/,c],[/blackberry/,_],[/blackberry.*?version\/([\.\_\d]+)/,_],[/bb\d+.*?version\/([\.\_\d]+)/,_],[/rim.*?version\/([\.\_\d]+)/,_],[/iceweasel\/([\.\_\d]+)/,"Iceweasel"],[/edge\/([\.\d]+)/,s],[/edg\/([\.\d]+)/,s],[/yabrowser\/([\.\d]+)/,"Yandex"],[/seamonkey\/([\.\d]+)/,"Seamonkey"],[/googlebot\/([\.\d]+)/,"Googlebot"]];function f(e,n){var t={name:"Other Browser",version:[],versionString:"N/A"};return e.forEach(function(e){var o=e[0],r=e[1],i=n.match(o);i&&(t.name=r,i[2]?(t.versionString=i[2],t.version=[]):i[1]?(t.versionString=i[1].replace(/_/g,".").split(".").slice(0,2).join("."),t.version=function(e){return e.split(/[\._]/).map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)})}(i[1])):(t.versionString="N/A",t.version=[]))}),t}var l={ipod:function(){return/ipod/g.test(t)},ipad:function(){return/ipad/g.test(t)},iphone:function(){return/iphone/g.test(t)},macintosh:function(){return/macintosh/g.test(t)},androidPhone:function(){return/android/g.test(t)&&/mobile/g.test(t)},androidTablet:function(){return/android/g.test(t)&&!/mobile/g.test(t)},windowsPhone:function(){return/^.*?windows.*?((phone)|(mobile)).*?$/g.test(t)},windowsTablet:function(){return/^.*?windows.*?touch.*?$/g.test(t)},windows:function(){return/windows/g.test(t)},linux:function(){return/linux/g.test(t)},blackberryTablet:function(){return/((blackberry)|(bb10)|(rim))/g.test(t)&&/tablet/g.test(t)},blackberryPhone:function(){return/((blackberry)|(bb10)|(rim))/g.test(t)&&!/tablet/g.test(t)}};e.exports={init:function(){return t=window.navigator.userAgent.toLowerCase(),this},getDeviceInfo:function(){var e=function(){for(var e in l)if(l[e]())return e;return"other"}();return{device:o[e][0],type:o[e][1]}},getBrowserInfo:function(){var e=f(d,t);return{browser:e.name,version:e.versionString}}}},function(e,n,t){var o=t(2),r=t(1);e.exports=function(e,n,t){var i=n&&t||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var u=0;u<16;++u)n[i+u]=a[u];return n||r(a)}},function(e,n,t){var o,r,i=t(2),a=t(1),u=0,s=0;e.exports=function(e,n,t){var c=n&&t||0,_=n||[],d=(e=e||{}).node||o,f=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==f){var l=i();null==d&&(d=o=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==f&&(f=r=16383&(l[6]<<8|l[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),C=void 0!==e.nsecs?e.nsecs:s+1,v=g-u+(C-s)/1e4;if(v<0&&void 0===e.clockseq&&(f=f+1&16383),(v<0||g>u)&&void 0===e.nsecs&&(C=0),C>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=g,s=C,r=f;var p=(1e4*(268435455&(g+=122192928e5))+C)%4294967296;_[c++]=p>>>24&255,_[c++]=p>>>16&255,_[c++]=p>>>8&255,_[c++]=255&p;var m=g/4294967296*1e4&268435455;_[c++]=m>>>8&255,_[c++]=255&m,_[c++]=m>>>24&15|16,_[c++]=m>>>16&255,_[c++]=f>>>8|128,_[c++]=255&f;for(var w=0;w<6;++w)_[c+w]=d[w];return n||a(_)}},function(e,n,t){var o=t(0),r=t(4),i=18e5,a=63072e6,u=["www.google."],s={utm_campaign:["utm_campaign"],utm_medium:["utm_medium","refid"],utm_source:["utm_source"],utm_content:["utm_content"],utm_term:["utm_term"]},c=[o.CK_GCLID,o.CK_GCLSRC,o.CK_REFERRER,o.CK_UTM_CAMPAIGN,o.CK_UTM_MEDIUM,o.CK_UTM_SOURCE,o.CK_UTM_CONTENT,o.CK_UTM_TERM,o.CK_CAMPAIGN_TYPE],_=[];function d(e){_.push(e)}function f(e){var n=Math.min(i,r.getDiffMsBeforeMidnight());r.setCookie(o.CK_SESSION_ID,e,n)}function l(e){var n=Math.min(i,r.getDiffMsBeforeMidnight());r.setCookie(o.CK_SESSION_ACTION_SEQUENCE,e,n)}function g(e,n){r.setCookie(e,n,i)}function C(){var e=window.document.referrer,n=r.getCookie(o.CK_REFERRER);if(e&&function(e){for(var n in u)if(-1!==e.indexOf(u[n]))return!0}(e)&&(d(function(){g(o.CK_REFERRER,e),g(o.CK_CAMPAIGN_TYPE,"referrals")}),e!==n))return!0}function v(e,n){return r.getParameterURL(s[e],n)}e.exports={init:function(e){e},getBwaUserSessionSequence:function(){return r.getCookieAsNumber(o.CK_USER_SESSION_SEQUENCE)},getBwaUserId:function(){return r.getCookie(o.CK_USER_ID)},getBwaSessionId:function(){return r.getCookie(o.CK_SESSION_ID)},getBwaSessionActionSequence:function(){return r.getCookieAsNumber(o.CK_SESSION_ACTION_SEQUENCE)},updateCampaignSession:function(){var e=function(){var e=r.getParameterURL("gclid"),n=r.getCookie(o.CK_GCLID);if(e&&(d(function(){g(o.CK_GCLID,e),g(o.CK_GCLSRC,r.getParameterURL("gclsrc")),g(o.CK_CAMPAIGN_TYPE,"adwords-autotagging")}),e!==n))return!0}(),n=C(),t=function(){var e=r.getUrlParamAsObject(),n=v("utm_campaign",e),t=v("utm_medium",e),i=v("utm_source",e),a=v("utm_content",e),u=v("utm_term",e);if((n||t||i||a||u)&&(d(function(){g(o.CK_UTM_CAMPAIGN,n),g(o.CK_UTM_MEDIUM,t),g(o.CK_UTM_SOURCE,i),g(o.CK_UTM_CONTENT,a),g(o.CK_UTM_TERM,u),g(o.CK_CAMPAIGN_TYPE,"campaign-tags")}),n!==r.getCookie(o.CK_UTM_CAMPAIGN)||t!==r.getCookie(o.CK_UTM_MEDIUM)||i!==r.getCookie(o.CK_UTM_SOURCE)||a!==r.getCookie(o.CK_UTM_CONTENT)||u!==r.getCookie(o.CK_UTM_TERM)))return!0}();e||n||t?(!function(){for(var e in c)r.deleteCookie(c[e])}(),_.forEach(function(e){return e()}),r.deleteCookie(o.CK_SESSION_ID)):function(){for(var e in c){var n=r.getCookie(c[e]);n&&g(c[e],n)}}(),_=[]},updateBwaSessionId:function(){var e=this.getBwaSessionId();if(!e)return l(0),f(r.generateUniqueId()),function(e){r.setCookie(o.CK_USER_SESSION_SEQUENCE,e,a)}(this.getBwaUserSessionSequence()+1),!0;f(e)},updateBwaUserId:function(){!function(e){r.setCookie(o.CK_USER_ID,e,a)}(this.getBwaUserId()||r.generateUniqueId())},incBwaSessionActionSequence:function(){l(this.getBwaSessionActionSequence()+1)}}},function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};function i(e,n){var t={};for(var o in e)n.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}var a=t(9),u=t(6),s=t(0),c=t(4),_=t(5),d="",f={},l={},g={},C=0,v=new Map,p=new Set,m=new Set,w=new Map,E=new Map,S={insertPendingData:function(){},insertOngoingData:function(){},deletePendingData:function(){},deleteOngoingData:function(){}},b=["beforeunload","popstate","navigate"];function A(){return!!T()?"m":"-1002"}function T(){return c.getCookie(s.USER_ID)}function O(e,n,t){var o=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open(e,n,!0),o.send(t)}function I(e,n,t){return fetch(n,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function N(){a.updateBwaUserId(),a.updateCampaignSession(),a.updateBwaSessionId()&&L.push({event:{path:"/session",customParams:{pageurl:document.URL,prevurl:document.referrer,referrer:c.getCookie(s.CK_REFERRER),gclid:c.getCookie(s.CK_GCLID),gclsrc:c.getCookie(s.CK_GCLSRC),utm_campaign:c.getCookie(s.CK_UTM_CAMPAIGN),utm_medium:c.getCookie(s.CK_UTM_MEDIUM),utm_source:c.getCookie(s.CK_UTM_SOURCE),utm_content:c.getCookie(s.CK_UTM_CONTENT),utm_term:c.getCookie(s.CK_UTM_TERM),campaign_type:c.getCookie(s.CK_CAMPAIGN_TYPE),usersessionsequence:a.getBwaUserSessionSequence()}}})}function M(e,n){v.get(e)||(v.set(e,n),1===v.size&&function e(){if(0!==v.size){var n=v.keys().next().value;v.get(n)(function(){v.delete(n),e()})}}())}function h(e){var n=c.generateUniqueId();!function(e,n){w.set(e,n),S.insertPendingData(r({},n,{uuid:e}))}(n,{event:e.payload.event,timestamp:(new Date).getTime(),eventId:n,schemaType:"GA4",payload:r({},e)})}function y(){if(0!==w.size){var e=[];w.forEach(function(n){e.push(n),e.length>=C&&(D(c.generateUniqueId(),e),e=[])}),D(c.generateUniqueId(),e),w.forEach(function(e,n){!function(e){w.delete(e),S.deletePendingData(e)}(n)})}}function U(){0!==E.size&&E.forEach(function(e,n){M(n,function(t){I("POST",s.BWA_HOSTNAME+"/event-batch",{events:e}).then(function(e){e.status&&!s.BATCH_SKIP_STATUS.includes(e.status)&&function(e){E.delete(e),S.deleteOngoingData(e)}(n)}).then(t)})})}function D(e,n){E.set(e,n),S.insertOngoingData({uuid:e,bulkData:n})}function P(e){var n=e.target.result;n&&(E.set(n.value.uuid,n.value.bulkData),n.continue())}function B(e){var n=e.target.result;if(n){var t=n.value,o=t.uuid,r=i(t,["uuid"]);w.set(o,r),n.continue()}}function K(e){var n=e.ecommerce,t=e.params,o=i(e,["ecommerce","params"]),u=T(),_=u?{client_member_id:u}:{};return r({page_url:window.document.URL,client_member_type:A()},_,{account_id:d,utma:c.getCookie(s.CK_UTMA),utmb:c.getCookie(s.CK_UTMB),user_id:a.getBwaUserId(),session_id:a.getBwaSessionId(),session_action_sequence:a.getBwaSessionActionSequence(),device:f.device,device_type:f.type,browser:l.browser,browser_version:l.version,payload:r({},o,n,t)})}function k(){C=parseInt(s.BATCH_QUOTA_SIZE,10),_.loadPendingData(B),_.loadOngoingData(P),S.insertOngoingData=_.insertOngoingData,S.insertPendingData=_.insertPendingData,S.deleteOngoingData=_.deleteOngoingData,S.deletePendingData=_.deletePendingData,y(),U(),clearInterval(window._bwa_interval),window._bwa_interval=setInterval(function(){y(),U()},parseInt(s.BATCH_INTERVAL_IN_MILISECOND,10)),window.addEventListener("beforeunload",function(){clearInterval(window._bwa_interval)}),b.forEach(function(e){window.addEventListener(e,function(){y(),U()})})}var L={init:function(e,n){e=e||[],function(e){e&&Object.entries(e).forEach(function(e){var n=o(e,2),t=n[0],r=n[1];s[t]=r})}(n),p=new Set(s.ALLOWED_EVENTS.split(",")),m=new Set(s.ALLOWED_EVENTS_BATCH.split(",")),_.initDB(k);var t=e.find(function(e){return e.accountId});for(var r in d=t?t.accountId:function(){var e=window.document.URL;return e.indexOf(s.MTA_HOSTNAME)>-1?"blibli-MTA":(e.indexOf(s.BLIBLI_HOSTNAME),"blibli-Seoul")}(),a.init(d),u.init(),f=u.getDeviceInfo(),l=u.getBrowserInfo(),e)this.push({data:e[r].data||{}});for(var i in e)this.push({event:e[i].event||{}});return this.injectGA(),this},push:function(e){if(e.data&&r(g,e.data),e.event)if(e.event.manageSession&&N(),e.event.incSessionActionSequence&&a.incBwaSessionActionSequence(),"string"==typeof e.event&&m.has(e.event))N(),h(K(e));else if("string"==typeof e.event&&p.has(e.event))N(),I("POST",s.BWA_HOSTNAME+"/event/"+e.event,K(e));else if(e.event.path){var n=T(),t=n?{client_member_id:n}:{},o=r({pageurl:window.document.URL,clientmembertype:A()},t,{accountid:d,utma:c.getCookie(s.CK_UTMA),utmb:c.getCookie(s.CK_UTMB),userid:a.getBwaUserId(),sessionid:a.getBwaSessionId(),sessionactionsequence:a.getBwaSessionActionSequence(),device:f.device,devicetype:f.type,browser:l.browser,browserversion:l.version});r(o,function(e){var n=e||[],t={};for(var o in n){var r=n[o];t[r]="clientmemberid"===r?T():g[r]||""}return t}(e.event.dataParams)),r(o,e.event.customParams||{});var i=function(e){var n="";for(var t in e)""!==n&&(n+="&"),n+=t+"="+encodeURIComponent(e[t]);return n}(o);e.event.pixel?encodeURIComponent(i).length>1800?O("POST",s.BWA_HOSTNAME+"/track-pixel"+e.event.path,i):O("GET",s.BWA_HOSTNAME+"/track-pixel"+e.event.path+"?"+i,""):O("GET",s.BWA_HOSTNAME+"/track"+e.event.path+"?"+i,"")}},injectGA:function(){void 0===window.dataLayer&&(window.dataLayer=[]);var e=this.push;if(Array.isArray(window.dataLayer))try{var n=window.dataLayer.push;window.dataLayer.push=function(){try{e(arguments[0])}catch(e){console.error("error when pushing bwa tracker"),console.error(e)}n.apply(this,arguments)},function(e){var n=this;e.forEach(function(e){n.push(e)})}.apply(this,[window.dataLayer])}catch(e){console.error("error while injecting bwa tracker"),console.error(e)}}};e.exports=L},function(e,n,t){var o=t(10),r=t(3).v4,i=void 0;!function(e,n){var t=window.document.currentScript.src.split("/").splice(0,4).join("/")+"/configs/index.json?id="+r();fetch(t).then(function(e){return e.json()}).then(function(n){e(n)}).catch(function(){console.error("bwa: error during load constants")}).finally(n)}(function(e){i=e},function(){window._bwa=o.init(window._bwa,i)})}]);